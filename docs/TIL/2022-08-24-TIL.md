---
layout: post
title:  "2022-08-24 TIL"
date:   2022-08-24 09:00:00 +0900
categories: TIL
---


<span style="color:green"> MySQL > Procedure </span>
=====================================================

- Procedure란?

    한번의 실행으로 여러 SQL문을 실행 할 수 있는 기능이다. 그러므로 네트워크에 대한 부하를 줄일 수 있다.

- 장점 

    보수성이 뛰어나다.
    
    하나의 쿼리로 해석하기때문에 데이터 처리 속도가 빠르다.
    
    트리거를 사용할 수 있다.


- 단점

    MySQL의 경우 아직 Stored Procedure의 성능이 타 프로그램에 비해 부족하다.


<span style="color:red"> Procedure 기본형태 </span>
-----------------------------------------------

```SQL
CREATE DEFINER=`DB아이디`@`%` PROCEDURE `프로시저명`()
BEGIN

  SELECT * 
  FROM 테이블명

END
```
DB에 접속하는 ID를 적어줘야된다 여기서 ID는 권한이 있는 ID를 적어준다.

프로시저명옆에 ()를 통해서 파라미터를 받아줄수있다.

파라미터명 자료형  의 구조로 받아줘야된다 

```SQL
CREATE DEFINER=`root`@`%` PROCEDURE `test`(id INT)
```


<span style="color:red"> 변수선언 </span>
-----------------------------------------------

프로시저 내부에서 변수를 선언하기 위해서는 DECLARE문을 사용해야된다.
```SQL
DECLARE user_name INT DEFAULT 0;
```
변수를 선언할때 동시의 2개의 변수를 선언할 수 있다

```SQL
DECLARE user_name, user_job INT DEFAULT 0;
```
<span style="color:red"> Procedure 호출 </span>
-----------------------------------------------
```SQL
CALL GetUser();
```


<span style="color:green"> @RequestBody, @ModelAttribute </span>
=====================================================