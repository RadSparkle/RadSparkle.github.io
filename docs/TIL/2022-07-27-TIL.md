---
layout: post
title:  "2022-07-27 TIL"
date:   2022-07-27 14:29:06 +0900
categories: TIL
---

<span style="color:green"> Mybatis > choose,when,otherwise문 </span>
===================================================================

```sql
<choose>
	<when test="조건식1"> 쿼리문1 </when>
    <when test="조건식2"> 쿼리문2 </when>
    <when test="조건식3"> 쿼리문3 </when>
    <when test="조건식4"> 쿼리문4 </when>
	<otherwise> 쿼리문5 </otherwise>
</choose>
```

해당 조건식에 해당하면 해당 쿼리문을 실행
어떤 조건식에도 부합하지않으면 otherwise를 실행

Ex)
```sql
...
WHERE id = #{id}
        <choose>
            <when test="option==0">
                ORDER BY aindex ASC
            </when>
            <when test="option==1">
                ORDER BY aindex DESC
            </when>
        </choose>
```
option 파라미터가 0 이면 ORDER BY aindex ASC를 실행
option 파라미터가 1이면 ORDER BY aindex DESC를 실행

<span style="color:green"> @RequestBody </span>
================================================

클라이언트가 보내는 HTTP 요청 본문(JSON 등)을 HttpMessageConverter을 통해서 타입에 맞는 객체로 변환합니다.

그렇기에 Body가 존재하지않는 HTTP GET 메서드에서는 사용할시 에러가발생함.

setter가 없어도됨

<span style="color:green"> @RequestParam </span>
================================================

1개의 HTTP 요청 파라미터를 받기위해서 사용됨.

매개변수가 필수적으로 필요함

<span style="color:green"> @ModelAttribute </span>
==================================================
클라이언트가 보내는 HTTP 파라미터들을 setter를 통해 특정 오브젝트 형태로 바인딩(맵핑) 하는 역할을 합니다.

따라서 바인딩을 받는 필드는 setter가 있어야됨

@ModelAttribute를 사용하지않고 @RequestParam을 사용한다면

받은 파라미터들을 객체에 하나하나 set해줘서 넣는 코드가 필요하지만

@ModelAttribute를 사용하면 위와같은 과정을 자동으로 처리해줍니다.


과정)
1. 파라미터로 넘겨준 타입의 오브젝트를 자동으로 생성
2. 생성된 오브젝트 HTTP로 넘어온 값들을 자동으로 바인딩
3. 마지막으로 @ModelAttribute 어노테이션이 붙은 객체가 자동으로 Model객체레 추가되고 view단으로 전달


<span style="color:green"> JSON-SIMPLE </span>
=============================================

json-simple 라이브러리를 추가후 JSONobject, JSONarray, JSONparser를 사용할 수 있다.

    implementation 'com.googlecode.json-simple:json-simple:1.1.1'


<span style="color:green"> JSONObject </span>
----------------------------------------------

json 형태의 데이터를 관리해주는 메소드이다.
텍스트를 읽어서 map구조의 object를 생성. JSONarray를 생성후 JSONobject에 put 메소드로 추가할수있다.


```java
구조 : {"name":"abcd","age":"20"}
사용방법 :
JSONObject jObj = new JSONObject;
jObj.put("name":"abcd")
jObj.put("age":"20")

String input = jObj.toString();
input 값 : {"name":"abcd","age":"20"}

String data = jObj.get("name");
get 값 : abcd
```

<span style="color:green"> JSONArray </span>
--------------------------------------------

문자열에서 vector 구조의 object를 생성

json-simple 라이브러리를 추가후 사용할 수 있다.

    implementation 'com.googlecode.json-simple:json-simple:1.1.1'

```java
import org.json.*;
public class JSONArrayTest {
   public static void main(String[] args) throws JSONException {
      JSONArray array = new JSONArray();
      array.put("Apple");
      array.put("Banana");
      array.put("Grape");
      JSONObject obj = new JSONObject();
      obj.put("fruit", array);
      System.out.println(obj);
   }
}
결과값 : 
{"fruite":["Apple","Banana","Grape"]}
```

<span style="color:green"> JSONParser </span>
---------------------------------------------
json-simple 라이브러리를 추가후 사용할 수 있다.

    implementation 'com.googlecode.json-simple:json-simple:1.1.1'



<span style="color:green"> ObjectMapper </span>
=============================================

