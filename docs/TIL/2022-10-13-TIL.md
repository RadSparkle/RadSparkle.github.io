---
layout: post
title:  "2022-10-13 TIL"
date:   2022-10-13 09:00:00 +0900
categories: TIL
---

<span style="color:green"> Centos > Today I Learn  </span>
=====================================================

1. Centos의 proxy reverse와 proxy 설정

2. Http 포트 설정

3. 서버에서 jar 실행


<span style="color:green"> 회고  </span>
----

요즘  운영서버에있는 API, DB, 프론트단을 전부 카피한 개발서버를 세팅중이다.

현재 운영서버와 개발서버가 나누어져있고 API와 프론트도 나누어져있지만 DB는 운영DB 한개만 사용하고있기때문에 DB의 변경사항이 있을때 운영서버에도 반영이되어서 개발할때의 불편함이 큰 상태였다.


또한 기존 개발서버는 클라우드이기때문에 혹시나하는 상황에 대비해서 로컬개발서버가 필요했었다.

이전에는 내가 모르는 어떠한? 문제로인해서 로컬 개발서버를 셋팅하지못했던것으로 알고있지만 어쨋든 로컬 개발서버를 내가 처음부터 셋팅하였고 이제 막바지에 이르렀다..

사실 기존에 API를 war로 빌드한후 수동으로 배포해본적은 있지만 jar로 배포한적없고 또 프론트(리액트)를 배포해본적이 없어서 처음에는 많은 시행착오를 거쳤다.

리액트를 서버내에서 빌드한후 실행시키는것과 실행전에 리액트 환경설정하는법을 배웠고

그 리액트가 서버에 올려져있는 API를 바라볼수있도록 리액트에서 접속한 포트를 proxy와 proxy reverse로 포워딩해주어 알맞는 API의 포트를 바라볼수있게 해주었다.

proxy 설정을 해줄때 일단 ssl을 사용하지않고 해보았기때문에 vhost.conf 파일을 만들어서 virtualHost로 80포트로 들어오는 요청을 잡아준후 예를들어서 /home 으로 들어오는 요청을  http://localhost:8000/home   여기로 갈수있게 포워딩 해주었다

하지만 처음에 proxy 셋팅을할때 /home으로 들어온 요청을 http://localhost:8000 으로 갈수있게 포워딩해주어서 API를 제대로 찾지못했다.. 이것때문에 중간에 많이 삽질을했던것같다.

어쨋든 이 문제를 잘 해결하였고 현재는 메인 API는 module들로 이루어져있어 각각의 패키지들이 jar로 구동되게되는데

그 jar들을 한번에 실행하는 sh파일을 만들어 실행시켜봤지만 오류가 발생하였다... 오류를 검색해봤는데 뜬금없는 오류가 나와서 해결방안을 찾는중이다.


또한 오늘 팀장님께서 db에서 특정 이름에맞는 코드를 추출하는 API 구현을 맡기셨는데 구현은 하였지만 추가적인 요청사항이 있어서 추가로 진행할 생각이다.

개발서버를 직접 셋팅하면서 서버에서 API와 프론트가 어떤식으로 돌아가고 서버안에서의 포워딩은 어떤식으로 돌아가는지.... 어느정도 감은 잡히는것같지만 아직 너무 멀었다..