---
layout: post
title:  "2022-08-22 TIL"
date:   2022-08-22 09:00:00 +0900
categories: TIL
---

<span style="color:green"> PV, UV 쿼리문 작성 </span>
=====================================================

요즘 회사에서 PV, UV 통계를 추출하는 쿼리문을 작성중이다.

먼저 PV란 Page View의 약자이며, 한 유저의 페이지 이동을 전부 카운팅 한 것이다. 그러므로 한 유저에대한 PV는 중복해서 카운팅된다

UV란 유저가 최초접속했을때 카운팅되며 페이지 이동에대해서는 카운팅하지않는다.

PV, UV 두 값 모두 유저를 구분할수있는 기준으로 조회해야된다 가령 ip, os, id등을 기준으로해서 유저를 구분할수있는 기준으로 조회한다.



쿼리문을 실행시 SELECT가 먼저 실행되고 GROUP BY를 처리한다.

FUNCTION은 WHERE 말고 서브쿼리에 적용해야 처리시간을 절약할수있다.

index는 = 가 적용되지않는다. 크다 작다(< , >)의 조건에서만 적용이된다.




